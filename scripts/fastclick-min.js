/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENCE.txt)
 * @codingstandard ftlabs-jslint
 * Downloaded 10/4/12
 *
 *//*jslint browser:true*//*global Node, define*/(function(){"use strict";function needsClick(target){switch(target.nodeName.toLowerCase()){case"label":case"video":return!0;default:return/\bneedsclick\b/.test(target.className)}}function needsFocus(target){switch(target.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1;default:return!0}break;default:return/\bneedsfocus\b/.test(target.className)}}function eleAtWindowPosition(x,y){if(chromeAndroid&&window.devicePixelRatio){x*=window.devicePixelRatio;y*=window.devicePixelRatio}return document.elementFromPoint(x,y)}function FastClick(layer){var oldOnClick,clickStart={x:0,y:0,scrollX:0,scrollY:0},trackingClick=!1,bound=Math.pow(37,2),onTouchStart=function(event){trackingClick=!0;clickStart.x=event.targetTouches[0].pageX;clickStart.y=event.targetTouches[0].pageY;clickStart.x===event.targetTouches[0].clientX&&(clickStart.x+=window.pageXOffset);clickStart.y===event.targetTouches[0].clientY&&(clickStart.y+=window.pageYOffset);clickStart.scrollX=window.pageXOffset;clickStart.scrollY=window.pageYOffset;return!0},onTouchMove=function(event){if(!trackingClick)return!0;Math.pow(event.targetTouches[0].pageX-clickStart.x,2)+Math.pow(event.targetTouches[0].pageY-clickStart.y,2)>bound&&(trackingClick=!1);if(Math.abs(window.pageXOffset-clickStart.scrollX)>scrollBoundary||Math.abs(window.pageYOffset-clickStart.scrollY)>scrollBoundary)trackingClick=!1;return!0},onTouchEnd=function(event){var targetElement,forElement,targetCoordinates,clickEvent;if(!trackingClick)return!0;trackingClick=!1;targetCoordinates={x:clickStart.x-clickStart.scrollX,y:clickStart.y-clickStart.scrollY};targetElement=eleAtWindowPosition(targetCoordinates.x,targetCoordinates.y);if(!targetElement)return!1;targetElement.nodeType===Node.TEXT_NODE&&(targetElement=targetElement.parentElement);if(targetElement.nodeName.toLowerCase()==="label"&&targetElement.htmlFor){forElement=document.getElementById(targetElement.htmlFor);if(forElement){targetElement.focus();if(android)return!1;targetElement=forElement}}else if(needsFocus(targetElement)){targetElement.focus();return!1}if(needsClick(targetElement))return!1;clickEvent=document.createEvent("MouseEvents");clickEvent.initMouseEvent("click",!0,!0,window,1,0,0,targetCoordinates.x,targetCoordinates.y,!1,!1,!1,!1,0,null);clickEvent.forwardedTouchEvent=!0;targetElement.dispatchEvent(clickEvent);event.preventDefault();return!1},onTouchCancel=function(){trackingClick=!1},onClick=function(event){var targetElement;if(event.forwardedTouchEvent)return!0;if(!event.cancelable)return!0;targetElement=eleAtWindowPosition(clickStart.x-clickStart.scrollX,clickStart.y-clickStart.scrollY);if(!targetElement||!needsClick(targetElement)){event.stopImmediatePropagation&&event.stopImmediatePropagation();event.stopPropagation();event.preventDefault();return!1}return!0};if(!layer||!layer.nodeType)throw new TypeError("Layer must be a document node");if(typeof window.ontouchstart=="undefined")return;layer.addEventListener("click",onClick,!0);layer.addEventListener("touchstart",onTouchStart,!0);layer.addEventListener("touchmove",onTouchMove,!0);layer.addEventListener("touchend",onTouchEnd,!0);layer.addEventListener("touchcancel",onTouchCancel,!0);if(typeof layer.onclick=="function"){oldOnClick=layer.onclick;layer.addEventListener("click",function(event){oldOnClick(event)},!1);layer.onclick=null}}var android=navigator.userAgent.indexOf("Android")>0,chromeAndroid=android&&/Chrome|CrMo/.test(navigator.userAgent),scrollBoundary=android||navigator.userAgent.indexOf("PlayBook")===-1?5:20;typeof define=="function"&&define.amd?define(function(){return FastClick}):window.FastClick=FastClick})();